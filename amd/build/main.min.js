define("block_timezoneclock/main",["exports","core_form/dynamicform","core/templates"],(function(_exports,_dynamicform,_templates){var obj;
/**
   * Main js functions for block_timezoneclock
   *
   * @module block_timezoneclock/main
   * @copyright 2022 Harshil Patel <harshil8595@gmail.com>
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.registerForm=_exports.initBlock=void 0,_dynamicform=(obj=_dynamicform)&&obj.__esModule?obj:{default:obj};const dtOptions={year:"numeric",month:"short",weekday:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},updateTime=()=>document.querySelectorAll('[data-region="clock"]:not([data-autoupdate="false"])').forEach((clock=>{const datefractions=function(timeZone){let timestamp=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;const locale="en-us",ctdt=new Date(timestamp.toLocaleString(locale,{timeZone:timeZone})),[day,month,date,year,dateinfo,meridiem]=ctdt.toLocaleString(locale,dtOptions).replace(/,/gi,"").split(" "),[hour,minute,second]=dateinfo.split(":").map((unit=>unit.padStart(2,0)));return{day:day,month:month,date:date,year:year,hour:hour,minute:minute,second:second,meridiem:meridiem}}(clock.dataset.timezone);clock.querySelectorAll(".clock > span[data-fraction]").forEach((sp=>{const{fraction:fraction}=sp.dataset;sp.closest(".hand")?sp.style.setProperty("--rotation",datefractions[fraction]):sp.innerText!==datefractions[fraction]&&(sp.innerText=datefractions[fraction])}))}));_exports.initBlock=()=>{setInterval(updateTime,1e3)};_exports.registerForm=formUniqId=>{const form=document.getElementById(formUniqId);if(form){const dForm=new _dynamicform.default(form,form.dataset.formClass);dForm.load({instanceid:form.closest("[data-instance-id]").getAttribute("data-instance-id")}),dForm.addEventListener(dForm.events.FORM_SUBMITTED,(e=>{e.preventDefault(),(0,_templates.replaceNodeContents)(form.nextElementSibling,e.detail.html,e.detail.js)}))}}}));

//# sourceMappingURL=main.min.js.map