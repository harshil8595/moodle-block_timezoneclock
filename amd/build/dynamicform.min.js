define("block_timezoneclock/dynamicform",["exports","core_form/dynamicform","core/ajax","core/fragment"],(function(_exports,_dynamicform,_ajax,_fragment){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.BlockTimezoneclockDynamicForm=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_ajax=_interopRequireDefault(_ajax),_fragment=_interopRequireDefault(_fragment);class BlockTimezoneclockDynamicForm extends _dynamicform.default{get isUserLogginIn(){return void 0===BlockTimezoneclockDynamicForm.userLogginIn&&(BlockTimezoneclockDynamicForm.userLogginIn=!!this.container.getAttribute("data-user-loggedin")),BlockTimezoneclockDynamicForm.userLogginIn}getBody(formDataString){return _ajax.default.call([{methodname:BlockTimezoneclockDynamicForm.ajaxCallMethod,args:{formdata:formDataString,form:this.formClass}}],!0,this.isUserLogginIn)[0].then((response=>({...response,js:_fragment.default.processCollectedJavascript(response.javascript)})))}async submitFormAjax(){let additionalFormData=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!await this.validateElements())return void this.trigger(this.events.CLIENT_VALIDATION_ERROR,null,!1);this.disableButtons();const form=this.container.querySelector("form"),formData=new URLSearchParams([...new FormData(form).entries(),...new URLSearchParams(additionalFormData).entries()]);this.getBody(formData.toString()).then((response=>{if(response.submitted){const data=JSON.parse(response.data);this.enableButtons(),this.notifyResetFormChanges(),this.onSubmitSuccess(data)}else this.updateForm(response),this.enableButtons(),this.trigger(this.events.SERVER_VALIDATION_ERROR,null,!1);return null})).catch((exception=>this.onSubmitError(exception)))}}_exports.BlockTimezoneclockDynamicForm=BlockTimezoneclockDynamicForm,_defineProperty(BlockTimezoneclockDynamicForm,"ajaxCallMethod","block_timezoneclock_dynamic_form"),_defineProperty(BlockTimezoneclockDynamicForm,"userLogginIn",void 0)}));

//# sourceMappingURL=dynamicform.min.js.map